webpackJsonp([2],{0:function(module,exports,__webpack_require__){eval("var $ = __webpack_require__(7);\nvar heartProduct = __webpack_require__(84);\n\n\nfunction filterSetup() {\n  // Event for clicking on overlay on title dropdown\n  var $pageHeaderOverlay = $(\".js-page-header-overlay\");\n  var $pageHeaderTitle =$(\".page-header__title\");\n\n\n  $pageHeaderOverlay.on(\"click\", function() {\n    $pageHeaderTitle.click();\n  });\n}\n\n\n// var manageRefineMenu = require('./manage-refine-menu');\n// var toggleCategoryDropdown = require('./toggle-category-dropdown');\n// var loadBrands = require('modules/load-brands');\n\n// function setupToggleCategoryDropdown() {\n//   toggleCategoryDropdown();\n// }\n\n// function resetFilters() {\n//   var $filterSelects = $('#filter_options').find('.select_single select, .select_multiple select');\n\n//   $('#clear_filters').click(function(event) {\n//     event.preventDefault();\n//     $filterSelects.prop('selectedIndex', 0);\n//   });\n// }\n\n// function processSorting() {\n//   var $formSort = $('#sort_by_form');\n//   var $filterApply = $('#apply_filters');\n//   $('#sort_options').change(function(){\n//     $formSort.submit();\n//     $filterApply.click();\n//   });\n// }\n\n// function bindBrandsURl() {\n//   $('#apply_filters, #next_btn').on('click', function(e) {\n//     loadBrands(e.currentTarget);\n//   });\n\n//   $('#plp_filter_dd').on('click', 'a', function(e) {\n//     loadBrands(e.target);\n//   });\n// }\n\nfunction bindHeartItems() {\n  heartProduct('#pageItems', '.fav-item');\n}\n\n$(document).ready(function() {\n  filterSetup();\n  // manageRefineMenu();\n  // setupToggleCategoryDropdown();\n  // resetFilters();\n  // processSorting();\n  // bindBrandsURl();\n  bindHeartItems();\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/scripts/entry-points/plp/index.js\n// module id = 0\n// module chunks = 2\n//# sourceURL=webpack:///./lib/scripts/entry-points/plp/index.js?")},84:function(module,exports,__webpack_require__){eval("var $ = __webpack_require__(7);\nvar defaults = __webpack_require__(11);\nvar PRODUCT_CODE = 'data-pcode';\nvar SELECTORS = {\n  totalCount: '#heart_total_count',\n  favHeart: '.fav_heart'\n};\nvar CLASS_NAMES = {\n  activated: 'hearted_active'\n};\nvar REQUESTS = {\n  heartProduct: {\n    url: '/r/ajaxHeartProduct.jsp?',\n    method: 'POST'\n  },\n  totalCount: {\n    url: '/r/AjaxHeartTotalCount.jsp',\n    method: 'POST'\n  }\n};\n\nmodule.exports = init;\ndefaults(module.exports, {\n  heartProductM: heartProductM,\n  heartAll: heartAll,\n  SELECTORS: SELECTORS,\n  CLASS_NAMES: CLASS_NAMES,\n  REQUESTS: REQUESTS\n});\n\nfunction init(selector, delegateTo) {\n  var $el = $(selector);\n\n  if (delegateTo) {\n    $el.on('click', delegateTo, function(e) {\n      var target = e.currentTarget;\n      heartProductM(target, target.getAttribute(PRODUCT_CODE));\n    });\n  } else {\n    $el.on('click', function(e) {\n      var target = e.target;\n      heartProductM(target, target.getAttribute(PRODUCT_CODE));\n    });\n  }\n}\n\nfunction heartProductM(elem, pcode, size, sectionUrl){\n  var $span = $(elem).find('span');\n  if ($span.hasClass(CLASS_NAMES.activated)){\n    $span.removeClass(CLASS_NAMES.activated);\n    return submitHeart('product', pcode, 'remove', size, sectionUrl);\n  } else {\n    $span.addClass(CLASS_NAMES.activated);\n    return submitHeart('product', pcode, 'add', size, sectionUrl);\n  }\n}\n\nfunction submitHeart(paramtype, paramvalue, action, psize, sectionUrl) {\n  var data = {};\n  var heartInfo = {};\n\n  if (!paramtype) {\n    return rejectPromise('param type is required when hearting a product');\n  } else if (!paramvalue) {\n    return rejectPromise('param value is required when hearting a product');\n  } else if (!action) {\n    return rejectPromise('action is required when hearting a product');\n  }\n\n  switch (paramtype) {\n    case 'product':\n      data.pcode = paramvalue;\n      break\n    case 'brand':\n      data.bcode = paramvalue;\n      break\n  }\n\n  data.action_T = action;\n\n  if (psize) {\n    data.psize = psize;\n  }\n\n  if (sectionUrl) {\n    data.sectionURL = sectionUrl;\n  }\n\n  return requestHeartProduct(data)\n    .then(function(heartStatus) {\n      heartInfo.heartStatus = heartStatus;\n      return updateHeartCount();\n    })\n    .then(function(totalCount) {\n      heartInfo.totalCount = totalCount;\n      return heartInfo;\n    });\n}\n\nfunction sanitizeResponse(str) {\n  return str.replace(/^\\s+|\\s+$/g,'');\n}\n\nfunction rejectPromise(msg) {\n  return $.Deferred().reject(new Error(msg));\n}\n\nfunction requestHeartProduct(data) {\n  return $.ajax({\n      type: REQUESTS.heartProduct.method,\n      url: REQUESTS.heartProduct.url,\n      data: data\n    })\n    .then(function(res) {\n      return sanitizeResponse(res);\n    });\n}\n\nfunction updateHeartCount() {\n  return $.ajax({\n      type: REQUESTS.totalCount.method,\n      url: REQUESTS.totalCount.url,\n      cache: false\n    })\n    .then(function(res) {\n      var count = sanitizeResponse(res);\n      $(SELECTORS.totalCount).html(count);\n      return count;\n    });\n}\n\n//this method only use in mobile display product page\nfunction heartAll(elem){\n  if ($(elem).find('span').hasClass(CLASS_NAMES.activated)){\n    $('.fav_heart').removeClass(CLASS_NAMES.activated);\n  } else {\n    $('.fav_heart').addClass(CLASS_NAMES.activated);\n  }\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/scripts/modules/heart-product.js\n// module id = 84\n// module chunks = 2\n//# sourceURL=webpack:///./lib/scripts/modules/heart-product.js?")}});